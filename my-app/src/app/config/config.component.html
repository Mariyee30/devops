<mat-toolbar style="background-color:#051b2d;">
    <mat-toolbar-row>
        <button mat-icon-button class="example-icon toolbar-color" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <mat-icon>menu</mat-icon>
          </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
            <a class="dropdown-item" routerLink="/login" routerLinkActive="active">Login</a>
            <a class="dropdown-item" routerLink="/dashboard" routerLinkActive="active">Dashboard</a>
            <a class="dropdown-item" routerLink="/config" routerLinkActive="active">Config Editor Tool</a>
        </div>
        <span class="toolbar-color">Config Editor Tool</span>
    </mat-toolbar-row>
</mat-toolbar>

<div class="grey">
    <div class="mt-5 mx-5">
        <!-- Configuration Editor -->
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <form [formGroup]="configForm" (ngSubmit)="onSubmit()">
                        <p>
                            <label fr="server">Server:</label>
                            <input type="text" id="server" name="server" formControlName="server" class="form-control" placeholder="azure">
                        </p>
                        <p>
                            <label for="organization">Organization:</label>
                            <input type="text" id="organization" name="organization" formControlName="organization" class="form-control" placeholder="huntermob">
                        </p>
                        <p>
                            <label for="pat_username">PAT Username:</label>
                            <input type="text" id="pat_username" name="pat_username" formControlName="pat_username" class="form-control" placeholder="devopsMetrics">
                        </p>
                        <table class="table table-bordered" formArrayName="products">
                            <tr>
                                <th colspan="2">Products:</th>
                                <th width="100px"><button type="button" (click)="addProduct()" class="btn btn-primary">Add Product</button></th>
                            </tr>
                            <tr *ngFor="let product of configForm.get('products')['controls']; let i = index" [formGroupName]="i">
                                <td>
                                    SVG Product Name:
                                    <input type="text" formControlName="svg_product_name" class="form-control">
                                </td>
                                <td>
                                    <table class="table table-bordered" formArrayName="headers">
                                        <tr>
                                            <th colspan="2">Headers:</th>
                                            <th width="100px"><button type="button" (click)="addHeader(product.get('headers'))" class="btn btn-primary">Add Header</button></th>
                                        </tr>
                                        <tr *ngFor="let header of product.get('headers')['controls']; let j = index" [formGroupName]="j">
                                            <td>
                                                <input type="text" id="header-{{j}}" class="form-control" [formControlName]="j">
                                            </td>
                                            <td>
                                                <button (click)="removeHeader(product.get('headers'), j)" class="btn btn-danger">Remove</button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td>
                                    Number of Days:
                                    <input type="text" formControlName="numDays" class="form-control">
                                </td>
                                <td>
                                    <table class="table table-bordered" formArrayName="projects">
                                        <tr>
                                            <th colspan="2">Projects:</th>
                                            <th width="100px"><button type="button" (click)="addProject(product.get('projects'))" class="btn btn-primary">Add Projects</button></th>
                                        </tr>
                                        <tr *ngFor="let project of product.get('projects')['controls']; let k = index" [formGroupName]="k">
                                            <td>
                                                <input type="text" formControlName="project_name" class="form-control">
                                            </td>
                                            <td>
                                                <button (click)="removeHeader(product.get('projects'), k)" class="btn btn-danger">Remove</button>
                                            </td>
                                        </tr>
                                    </table>
                                </td>
                                <td>
                                <td>
                                    <button (click)="removeProduct(i)" class="btn btn-danger">Remove</button>
                                </td>
                            </tr>
                        </table>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form> 
                </div>
                <div class="col-md-6">
                    <div class="json-results">
                        <pre>{{this.configForm.value | json}}</pre>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>